[
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": "frappe.ready(() => {\n  $('#fetch_rates').on('click', () => {\n    const dispatch = JSON.parse($('#dispatch_address').val());\n    const shipping = JSON.parse($('#shipping_address').val());\n    const weight = $('#weight').val();\n\n    $('#rate_results').html(\"Loading...\");\n\n    frappe.call({\n      method: 'fedex_rate_estimator.api.get_fedex_rates',\n      args: {\n        dispatch_address: dispatch,\n        shipping_address: shipping,\n        weight: weight\n      },\n      callback: (r) => {\n        if (r.message) {\n          let html = '<h4>FedEx Rates</h4><table><tr><th>Type</th><th>Amount</th></tr>';\n          for (let rate of r.message) {\n            html += `<tr><td>${rate.type}</td><td>${rate.amount}</td></tr>`;\n          }\n          html += '</table>';\n          $('#rate_results').html(html);\n        } else {\n          $('#rate_results').html(\"No rates found.\");\n        }\n      }\n    });\n  });\n});\n",
  "main_section": null,
  "main_section_html": "<style>\n  .card {\n    padding: 1.5rem;\n    margin-bottom: 2rem;\n    border-radius: 0.75rem;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.05);\n  }\n  .section-title {\n    font-weight: 600;\n    font-size: 1.2rem;\n    margin-bottom: 1rem;\n  }\n</style>\n\n<h2 class=\"mb-4\">üì¶ FedEx Rate Estimator</h2>\n<p class=\"mb-4\">Fill out the dispatch and shipping details to fetch FedEx shipping rates</p>\n\n<form id=\"rate_form\">\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"card\">\n        <div class=\"section-title\">üì§ Dispatch Address</div>\n        <input type=\"text\" id=\"dispatch_line1\" class=\"form-control mb-2\" placeholder=\"Street Line 1\" required>\n        <input type=\"text\" id=\"dispatch_line2\" class=\"form-control mb-2\" placeholder=\"Street Line 2\">\n        <input type=\"text\" id=\"dispatch_city\" class=\"form-control mb-2\" placeholder=\"City\" required>\n        <input type=\"text\" id=\"dispatch_state\" class=\"form-control mb-2\" placeholder=\"State Code\" required>\n        <input type=\"text\" id=\"dispatch_zip\" class=\"form-control mb-2\" placeholder=\"Postal Code\" required>\n        <input type=\"text\" id=\"dispatch_country\" class=\"form-control mb-2\" placeholder=\"Country Code (e.g. US)\" required>\n        <div class=\"form-check\">\n          <input class=\"form-check-input\" type=\"checkbox\" id=\"dispatch_residential\">\n          <label class=\"form-check-label\" for=\"dispatch_residential\">Residential Address</label>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-6\">\n      <div class=\"card\">\n        <div class=\"section-title\">üì• Shipping Address</div>\n        <input type=\"text\" id=\"shipping_line1\" class=\"form-control mb-2\" placeholder=\"Street Line 1\" required>\n        <input type=\"text\" id=\"shipping_line2\" class=\"form-control mb-2\" placeholder=\"Street Line 2\">\n        <input type=\"text\" id=\"shipping_city\" class=\"form-control mb-2\" placeholder=\"City\" required>\n        <input type=\"text\" id=\"shipping_state\" class=\"form-control mb-2\" placeholder=\"State Code\" required>\n        <input type=\"text\" id=\"shipping_zip\" class=\"form-control mb-2\" placeholder=\"Postal Code\" required>\n        <input type=\"text\" id=\"shipping_country\" class=\"form-control mb-2\" placeholder=\"Country Code (e.g. US)\" required>\n        <div class=\"form-check\">\n          <input class=\"form-check-input\" type=\"checkbox\" id=\"shipping_residential\">\n          <label class=\"form-check-label\" for=\"shipping_residential\">Residential Address</label>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"card\">\n    <div class=\"section-title\">‚öñÔ∏è Weight</div>\n    <input type=\"number\" id=\"weight\" class=\"form-control mb-3\" value=\"10\" required placeholder=\"Weight in LB\">\n    <button type=\"submit\" class=\"btn btn-primary btn-lg\">üöÄ Fetch FedEx Rates</button>\n  </div>\n</form>\n\n<div id=\"rate_results\" class=\"mt-4\"></div>\n\n\n\n<script>\n  document.getElementById('rate_form').addEventListener('submit', function (e) {\n    e.preventDefault();\n\n    const getAddress = (prefix) => ({\n      streetLines: [document.getElementById(`${prefix}_line1`).value, document.getElementById(`${prefix}_line2`).value || \"\"],\n      city: document.getElementById(`${prefix}_city`).value,\n      stateOrProvinceCode: document.getElementById(`${prefix}_state`).value,\n      postalCode: document.getElementById(`${prefix}_zip`).value,\n      countryCode: document.getElementById(`${prefix}_country`).value,\n      residential: document.getElementById(`${prefix}_residential`).checked\n    });\n\n    const dispatch = getAddress(\"dispatch\");\n    const shipping = getAddress(\"shipping\");\n    const weight = document.getElementById('weight').value;\n\n    document.getElementById('rate_results').innerHTML = \"<em>Fetching rates, please wait...</em>\";\n\n    frappe.call({\n      method: \"fedex_rate_estimator.api.fedex_api.get_fedex_rates\",\n      args: {\n        dispatch_address: dispatch,\n        shipping_address: shipping,\n        weight: weight\n      },\n      callback: function (r) {\n        if (r.message && r.message.length > 0) {\n          let html = `\n            <div class=\"alert alert-success mt-3\">‚úÖ FedEx Rates Fetched</div>\n            <table class=\"table table-bordered mt-3\">\n              <thead>\n                <tr><th>Rate Type</th><th>Amount ($)</th></tr>\n              </thead><tbody>\n          `;\n          r.message.forEach(rate => {\n            html += `<tr><td>${rate.type}</td><td>${rate.amount}</td></tr>`;\n          });\n          html += \"</tbody></table>\";\n          document.getElementById('rate_results').innerHTML = html;\n        } else {\n          document.getElementById('rate_results').innerHTML = \"<div class='alert alert-warning mt-3'>No rates returned.</div>\";\n        }\n      }\n    });\n  });\n</script>\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2025-06-06 17:44:38.402756",
  "module": "FedEx Rate Estimator",
  "name": "shipment-rate-checker",
  "page_blocks": [],
  "published": 1,
  "route": "shipment-rate-checker",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Shipment Rate Checker",
  "website_sidebar": null
 }
]